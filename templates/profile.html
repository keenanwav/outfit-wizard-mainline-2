{% extends "base.html" %}

{% block content %}
<div class="profile-container" style="max-width: 600px; margin: 0 auto; padding: 20px;">
    <h2 style="text-align: center;">Profile Settings</h2>
    
    <!-- Profile Picture Section -->
    <div class="profile-picture" style="text-align: center; margin-bottom: 30px;">
        <img src="{{ url_for('static', filename='profile_pics/' + current_user.profile_picture) }}" 
             alt="Profile Picture"
             style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; margin-bottom: 15px;">
        <form action="{{ url_for('upload_profile_picture') }}" method="POST" enctype="multipart/form-data">
            <input type="file" name="profile_picture" accept="image/*" required style="margin-bottom: 10px;">
            <button type="submit" style="display: block; margin: 0 auto;">Update Picture</button>
        </form>
    </div>

    <!-- Profile Information Form -->
    <form action="{{ url_for('update_profile') }}" method="POST" class="profile-form">
        <div class="form-group">
            <label for="first_name">First Name:</label>
            <input type="text" id="first_name" name="first_name" value="{{ current_user.first_name or '' }}">
        </div>
        
        <div class="form-group">
            <label for="last_name">Last Name:</label>
            <input type="text" id="last_name" name="last_name" value="{{ current_user.last_name or '' }}">
        </div>

        <div class="form-group">
            <label for="bio">Bio:</label>
            <textarea id="bio" name="bio" rows="4">{{ current_user.bio or '' }}</textarea>
        </div>

        <button type="submit">Save Profile</button>
    </form>

    <!-- Change Password Section -->
    <div class="password-section" style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee;">
        <h3>Change Password</h3>
        <form action="{{ url_for('change_password') }}" method="POST">
            <div class="form-group">
                <label for="current_password">Current Password:</label>
                <input type="password" id="current_password" name="current_password" required>
            </div>

            <div class="form-group">
                <label for="new_password">New Password:</label>
                <input type="password" id="new_password" name="new_password" required>
                <small style="display: block; margin-top: 5px; color: #666;">
                    Password must contain:
                    <ul style="margin: 5px 0; padding-left: 20px;">
                        <li>5-16 characters</li>
                        <li>One uppercase letter</li>
                        <li>One lowercase letter</li>
                        <li>One number</li>
                        <li>One special character</li>
                    </ul>
                </small>
            </div>

            <div class="form-group">
                <label for="confirm_password">Confirm New Password:</label>
                <input type="password" id="confirm_password" name="confirm_password" required>
            </div>

            <button type="submit">Change Password</button>
        </form>
    </div>
</div>
{% endblock %}
